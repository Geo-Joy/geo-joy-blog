<!DOCTYPE html>
<html lang="en-us" class="wf-loading">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <meta name="HandheldFriendly" content="True" />
        <meta name="MobileOptimized" content="320" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <link rel="preload" href="http://geojoy.me/js/main.js" as="script" />
        <link rel="preload" href="http://geojoy.me/css/main.css" as="style" />

        <title>Backbone.js - Présentation</title>
        <meta name="generator" content="Hugo 0.32.4" />
        
        <link rel="preconnect" href="https://ajax.googleapis.com/" crossorigin>
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
        <meta property="og:title" content="Backbone.js - Présentation" />
<meta property="og:description" content="Cet article s&rsquo;adresse aux personnes désirants découvrir ou redécouvrir, l&rsquo;utilité et l&rsquo;utilisation de Backbone.JS au sein d&rsquo;une application Web Javascript. En effet Backbone.JS s&rsquo;inscrit dans les technologies Javascript clientes (puisqu&rsquo;il existe aussi un coté serveur via Node.js).
Les concepts Chaque concept est implémenté en Javascript de telle sorte qu&rsquo;ensemble ils forment votre application.
Les modèles Les modèles Backbone sont des objets Javascript servant à représenter l&rsquo;information, qui sera souvent utilisée pour l&rsquo;affichage." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://geojoy.me/post---copy/backbone-dot-js-presentation/" />



<meta property="article:published_time" content="2012-03-04T00:00:00&#43;00:00"/>

<meta property="article:modified_time" content="2017-03-01T11:27:27&#43;01:00"/>











    
        <meta property="og:type" content="article" />
        <meta property="og:article:published_time" content="2012-03-04T00:00:00Z" />
        <meta property="og:article:tag" content="backbone.js" />
        <meta property="og:article:tag" content="node.js" />
        <meta property="og:article:tag" content="tutorial" />
        
        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@megeojoy" />
        <meta name="twitter:creator" content="@megeojoy" />
        <meta name="twitter:title" content="Backbone.js - Présentation" />
        <meta name="twitter:description" content="" />
        <meta name="twitter:url" content="http://geojoy.me/post---copy/backbone-dot-js-presentation/" />
        
    

    
        <meta name="p:domain_verify" content="58lHJFznHgioHOIv2NvLfobc8XEUUZSKm016uFFO4vE"/>
    

    
    <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "Geo Joy",
      "url": "http://geojoy.me",
      "sameAs": [
        "https://twitter.com/megeojoy",
        "https://www.linkedin.com/in/geojoy/",
        "https://github.com/Geo-Joy",
      ],
      "image": {
        "@type": "ImageObject",
        "url": "https://geojoy.me/images/avatar.jpg",
        "height": 80,
        "width": 80
      }
    }
    </script>

    <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "@id": "http://geojoy.me",
      "name": "Geo&#39;z Blog",
      "url": "http://geojoy.me",
      "logo": {
        "@type": "ImageObject",
        "url": "https://geojoy.me/images/avatar.jpg",
        "height": 80,
        "width": 80
      }
    }
    </script>

    <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "WebSite",
      "url": "http://geojoy.me",
      "name": "Geo&#39;z Blog",
      "author": {
        "@type": "Person",
        "name": "Geo Joy"
      },
      "description": ""
    }
    </script>

      
      <script type="application/ld+json">
      {
          "@context": "http://schema.org",
          "@type": "BlogPosting",
          "headline": "Backbone.js - Présentation",
          "description": "",
          "author": {
              "@type": "Person",
              "name": "Geo Joy"
          },
          "publisher": {
              "@type": "Organization",
              "name": "Geo&#39;z Blog",
              "logo": "https://geojoy.me/images/avatar.jpg"
          },
          
          "image": {
            "@type": "ImageObject",
            "url": "https://geojoy.me/images/avatar.jpg",
            "height": 80,
            "width": 80
          },
          "datePublished": "2012-03-04",
          "dateModified": "2017-03-01",
          "wordCount": 975
          ,
          "keywords": ["backbone.js","node.js","tutorial"] 
      }
    </script>
  

    <style>
    body {
        margin: 0
    }

    main,
    nav {
        display: block
    }

    a {
        background-color: transparent
    }

    h1 {
        margin: .67em 0;
        font-size: 2em
    }

    img {
        border: 0
    }

    code,
    kbd {
        font-family: monospace, monospace;
        font-size: 1em
    }

    button {
        margin: 0;
        font: inherit;
        color: inherit
    }

    button {
        overflow: visible
    }

    button {
        text-transform: none
    }

    button {
        -webkit-appearance: button
    }

    button::-moz-focus-inner {
        padding: 0;
        border: 0
    }

    * {
        -webkit-box-sizing: border-box;
        box-sizing: border-box
    }

    :after,
    :before {
        -webkit-box-sizing: border-box;
        box-sizing: border-box
    }

    html {
        font-size: 10px
    }

    body {
        font-family: "Raleway", Helvetica, Arial, sans-serif;
        font-size: 14px;
        line-height: 1.42857143;
        color: #333;
        background-color: #000
    }

    button {
        font-family: inherit;
        font-size: inherit;
        line-height: inherit
    }

    a {
        color: #337ab7;
        text-decoration: none
    }

    img {
        vertical-align: middle
    }

    h1,
    h4,
    h5 {
        font-family: inherit;
        font-weight: 500;
        line-height: 1.1;
        color: inherit
    }

    h1 {
        margin-top: 20px;
        margin-bottom: 10px
    }

    h4,
    h5 {
        margin-top: 10px;
        margin-bottom: 10px
    }

    h1 {
        font-size: 36px
    }

    h4 {
        font-size: 18px
    }

    h5 {
        font-size: 14px
    }

    p {
        margin: 0 0 10px
    }

    .text-justify {
        text-align: justify
    }

    ul {
        margin-top: 0;
        margin-bottom: 10px
    }

    blockquote {
        padding: 10px 20px;
        margin: 0 0 20px;
        font-size: 17.5px;
        border-left: 5px solid #000
    }

    blockquote p:last-child {
        margin-bottom: 0
    }

    code,
    kbd {
        font-family: Menlo, Monaco, Consolas, "Courier New", monospace
    }

    code {
        padding: 2px 4px;
        font-size: 90%;
        color: #c7254e;
        background-color: #000;
        border-radius: 4px
    }

    kbd {
        padding: 2px 4px;
        font-size: 90%;
        color: #000;
        background-color: #333;
        border-radius: 3px;
        -webkit-box-shadow: inset 0 -1px 0 rgba(0, 0, 0, .25);
        box-shadow: inset 0 -1px 0 rgba(0, 0, 0, .25)
    }

    .container {
        padding-right: 15px;
        padding-left: 15px;
        margin-right: auto;
        margin-left: auto
    }

    @media (min-width:768px) {
        .container {
            width: 750px
        }
    }

    @media (min-width:992px) {
        .container {
            width: 970px
        }
    }

    @media (min-width:1200px) {
        .container {
            width: 1170px
        }
    }

    .collapse {
        display: none
    }

    .nav {
        padding-left: 0;
        margin-bottom: 0;
        list-style: none
    }

    .nav>li {
        position: relative;
        display: block
    }

    .nav>li>a {
        position: relative;
        display: block;
        padding: 10px 15px
    }

    .navbar {
        position: relative;
        min-height: 50px;
        margin-bottom: 20px;
        border: 1px solid transparent
    }

    @media (min-width:768px) {
        .navbar {
            border-radius: 4px
        }
    }

    @media (min-width:768px) {
        .navbar-header {
            float: left
        }
    }

    .navbar-collapse {
        padding-right: 15px;
        padding-left: 15px;
        overflow-x: visible;
        -webkit-overflow-scrolling: touch;
        border-top: 1px solid transparent;
        -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, .1);
        box-shadow: inset 0 1px 0 rgba(255, 255, 255, .1)
    }

    @media (min-width:768px) {
        .navbar-collapse {
            width: auto;
            border-top: 0;
            -webkit-box-shadow: none;
            box-shadow: none
        }
        .navbar-collapse.collapse {
            display: block !important;
            height: auto !important;
            padding-bottom: 0;
            overflow: visible !important
        }
        .navbar-fixed-top .navbar-collapse {
            padding-right: 0;
            padding-left: 0
        }
    }

    .navbar-fixed-top .navbar-collapse {
        max-height: 340px
    }

    @media (max-device-width:480px) and (orientation:landscape) {
        .navbar-fixed-top .navbar-collapse {
            max-height: 200px
        }
    }

    .container>.navbar-collapse,
    .container>.navbar-header {
        margin-right: -15px;
        margin-left: -15px
    }

    @media (min-width:768px) {
        .container>.navbar-collapse,
        .container>.navbar-header {
            margin-right: 0;
            margin-left: 0
        }
    }

    .navbar-fixed-top {
        position: fixed;
        right: 0;
        left: 0;
        z-index: 1030
    }

    @media (min-width:768px) {
        .navbar-fixed-top {
            border-radius: 0
        }
    }

    .navbar-fixed-top {
        top: 0;
        border-width: 0 0 1px
    }

    .navbar-brand {
        float: left;
        height: 50px;
        padding: 15px 15px;
        font-size: 18px;
        line-height: 20px
    }

    @media (min-width:768px) {
        .navbar>.container .navbar-brand {
            margin-left: -15px
        }
    }

    .navbar-toggle {
        position: relative;
        float: right;
        padding: 9px 10px;
        margin-top: 8px;
        margin-right: 15px;
        margin-bottom: 8px;
        background-color: transparent;
        background-image: none;
        border: 1px solid transparent;
        border-radius: 4px
    }

    .navbar-toggle .icon-bar {
        display: block;
        width: 22px;
        height: 2px;
        border-radius: 1px
    }

    .navbar-toggle .icon-bar+.icon-bar {
        margin-top: 4px
    }

    @media (min-width:768px) {
        .navbar-toggle {
            display: none
        }
    }

    .navbar-nav {
        margin: 7.5px -15px
    }

    .navbar-nav>li>a {
        padding-top: 10px;
        padding-bottom: 10px;
        line-height: 20px
    }

    @media (min-width:768px) {
        .navbar-nav {
            float: left;
            margin: 0
        }
        .navbar-nav>li {
            float: left
        }
        .navbar-nav>li>a {
            padding-top: 15px;
            padding-bottom: 15px
        }
    }

    @media (min-width:768px) {
        .navbar-right {
            float: right !important;
            margin-right: -15px
        }
    }

    .navbar-default {
        background-color: #000;
        border-color: #000
    }

    .navbar-default .navbar-brand {
        color: #777
    }

    .navbar-default .navbar-nav>li>a {
        color: #777
    }

    .navbar-default .navbar-toggle {
        border-color: #ddd
    }

    .navbar-default .navbar-toggle .icon-bar {
        background-color: #888
    }

    .navbar-default .navbar-collapse {
        border-color: #e7e7e7
    }

    .container:after,
    .container:before,
    .nav:after,
    .nav:before,
    .navbar-collapse:after,
    .navbar-collapse:before,
    .navbar-header:after,
    .navbar-header:before,
    .navbar:after,
    .navbar:before {
        display: table;
        content: " "
    }

    .container:after,
    .nav:after,
    .navbar-collapse:after,
    .navbar-header:after,
    .navbar:after {
        clear: both
    }

    @-ms-viewport {
        width: device-width
    }

    .visible-xs {
        display: none !important
    }

    @media (max-width:767px) {
        .visible-xs {
            display: block !important
        }
    }

    html {
        height: 100%
    }

    body {
        height: 100%;
        padding-top: 55px;
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        text-align: center;
        -webkit-box-orient: vertical;
        -webkit-box-direction: normal;
        -ms-flex-direction: column;
        flex-direction: column;
        font-size: 16px !important
    }

    main {
        margin: auto;
        padding: 25px;
        max-width: 750px
    }

    a:link,
    a:visited {
        color: green
    }

    .item {
        padding: 10px 0
    }

    .item-tag {
        background-color: green
    }

    .navbar-icon {
        font-size: 125%;
        display: inline-block !important
    }

    .navbar.navbar-default {
        border-top: 5px solid green
    }

    img {
        max-width: 100%
    }

    .fade-in {
        opacity: 0
    }

    .wf-loading p,
    .wf-loading h1,
    .wf-loading h2,
    .wf-loading h3,
    .wf-loading h4,
    .wf-loading a {
        visibility: hidden;
    }

    .wf-active p,
    .wf-active h1,
    .wf-active h2,
    .wf-active h3,
    .wf-active h4,
    .wf-active a {
        visibility: visible;
    }

    .wf-inactive p,
    .wf-inactive h1,
    .wf-inactive h2,
    .wf-inactive h3,
    .wf-inactive h4,
    wf-inactive a {
        visibility: visible;
    }
</style>
    </head>

    <body bgcolor="#000">
      
      <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KQ3JDPK"
      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
      

        <nav class="navbar navbar-default navbar-fixed-top">

            <div class="container">

                <div class="navbar-header">

                    <a class="navbar-brand visible-xs" href="#">Backbone.js - Présentation</a>

                    <button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>

                </div>

                <div class="collapse navbar-collapse">

                    
                        <ul class="nav navbar-nav">
                            
                                <li><a href="/">Home</a></li>
                            
                                <li><a href="/post/">Posts</a></li>
                            
                                <li><a href="/project/">Projects</a></li>
                            
                        </ul>
                    

                    
                        <ul class="nav navbar-nav navbar-right">
                            
                                <li class="navbar-icon"><a href="/resume/"><i class="fa fa-user"></i></a></li>
                            
                                <li class="navbar-icon"><a href="http://www.google.com/recaptcha/mailhide/d?k=01IIc-s5LNYiS-CG_gthn4PA==&amp;c=r5Ctx8RMDz422qmYESfk1g=="><i class="fa fa-envelope"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://github.com/Geo-Joy"><i class="fa fa-github-alt"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://twitter.com/megeojoy"><i class="fa fa-twitter"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://www.linkedin.com/in/geojoy/"><i class="fa fa-linkedin"></i></a></li>
                            
                        </ul>
                    

                </div>

            </div>

        </nav>


<main class="fade-in">

    <div class="item">

    
    
    

    
    

    <h4><a itemprop="url" href="/post---copy/backbone-dot-js-presentation/">
      <span itemprop="name">Backbone.js - Présentation</span>
    </a></h4>

    March 4, 2012
    <h5>March 4, 2012</h5>
     <a href="../../../../../tags/backbone.js"><kbd class="item-tag">backbone.js</kbd></a>  <a href="../../../../../tags/node.js"><kbd class="item-tag">node.js</kbd></a>  <a href="../../../../../tags/tutorial"><kbd class="item-tag">tutorial</kbd></a> 

</div>


    <br> <div class="text-justify">

<p>Cet article s&rsquo;adresse aux personnes désirants découvrir ou redécouvrir, l&rsquo;utilité et l&rsquo;utilisation de <a href="http://documentcloud.github.com/backbone/">Backbone.JS</a> au sein d&rsquo;une application Web Javascript. En effet <a href="http://documentcloud.github.com/backbone/">Backbone.JS</a> s&rsquo;inscrit dans les technologies Javascript clientes (puisqu&rsquo;il existe aussi un coté serveur via <a href="http://nodejs.org">Node.js</a>).</p>

<h2 id="les-concepts">Les concepts</h2>

<p>Chaque concept est implémenté en Javascript de telle sorte qu&rsquo;ensemble ils forment votre application.</p>

<h3 id="les-modèles">Les modèles</h3>

<p>Les modèles <a href="http://documentcloud.github.com/backbone/">Backbone</a> sont des objets Javascript servant à représenter l&rsquo;information, qui sera souvent utilisée pour l&rsquo;affichage.</p>
<div class="highlight"><pre style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#815ba4">var</span> <span style="color:#06b6ef">Person</span> <span style="color:#5bc4bf">=</span> <span style="color:#06b6ef">Backbone</span>.<span style="color:#06b6ef">Model</span>.<span style="color:#06b6ef">extend</span>({
	<span style="color:#776e71">// Déclaration des attributs de la classe MonModel
</span><span style="color:#776e71"></span>	<span style="color:#06b6ef">defaults</span> <span style="color:#5bc4bf">:</span> {
    	<span style="color:#06b6ef">firstname</span> <span style="color:#5bc4bf">:</span> <span style="color:#815ba4">null</span>,
        <span style="color:#06b6ef">lastname</span> <span style="color:#5bc4bf">:</span> <span style="color:#815ba4">null</span>
    }
});
<span style="color:#776e71">// Pour utiliser le modèle 
</span><span style="color:#776e71"></span><span style="color:#815ba4">var</span> <span style="color:#06b6ef">tno</span> <span style="color:#5bc4bf">=</span> <span style="color:#815ba4">new</span> <span style="color:#06b6ef">Person</span>({<span style="color:#06b6ef">firstname</span><span style="color:#5bc4bf">:</span> <span style="color:#48b685">&#34;Thibaud&#34;</span>, <span style="color:#06b6ef">lastname</span><span style="color:#5bc4bf">:</span> <span style="color:#48b685">&#34;Normand&#34;</span>});
<span style="color:#06b6ef">console</span>.<span style="color:#06b6ef">log</span>(<span style="color:#06b6ef">tno</span>.<span style="color:#06b6ef">get</span>(<span style="color:#48b685">&#34;firstname&#34;</span>));  <span style="color:#776e71">// &#34;Thibaud&#34;
</span><span style="color:#776e71"></span><span style="color:#06b6ef">tno</span>.<span style="color:#06b6ef">set</span>({<span style="color:#06b6ef">firstname</span><span style="color:#5bc4bf">:</span> <span style="color:#48b685">&#34;Thibaud&#34;</span>});
<span style="color:#06b6ef">console</span>.<span style="color:#06b6ef">log</span>(<span style="color:#06b6ef">tno</span>.<span style="color:#06b6ef">get</span>(<span style="color:#48b685">&#34;firstname&#34;</span>)); <span style="color:#ef6155">// &#34;Thibault&#34;</span></code></pre></div>
<h3 id="les-collections">Les collections</h3>

<p>Les collections sont des ensembles d&rsquo;objets, en général d&rsquo;un même type de modêle.</p>
<div class="highlight"><pre style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#815ba4">var</span> <span style="color:#06b6ef">PersonCollection</span> <span style="color:#5bc4bf">=</span> <span style="color:#06b6ef">Backbone</span>.<span style="color:#06b6ef">Collection</span>.<span style="color:#06b6ef">extend</span>({
	<span style="color:#776e71">// C&#39;est une collection d&#39;object de type Personne
</span><span style="color:#776e71"></span>	<span style="color:#06b6ef">model</span><span style="color:#5bc4bf">:</span> <span style="color:#06b6ef">Person</span>
});
<span style="color:#776e71">// Utilisation
</span><span style="color:#776e71"></span><span style="color:#815ba4">var</span> <span style="color:#06b6ef">collection</span> <span style="color:#5bc4bf">=</span> <span style="color:#815ba4">new</span> <span style="color:#06b6ef">PersonCollection</span>();
<span style="color:#06b6ef">collection</span>.<span style="color:#06b6ef">add</span>(<span style="color:#815ba4">new</span> <span style="color:#06b6ef">Person</span>({<span style="color:#48b685">&#34;firstname&#34;</span><span style="color:#5bc4bf">:</span> <span style="color:#48b685">&#34;toto&#34;</span>, <span style="color:#48b685">&#34;lastname&#34;</span><span style="color:#5bc4bf">:</span> <span style="color:#48b685">&#34;fait du vélo !&#34;</span>}));
<span style="color:#776e71">// Mais aussi …
</span><span style="color:#776e71"></span><span style="color:#815ba4">var</span> <span style="color:#06b6ef">collection2</span> <span style="color:#5bc4bf">=</span> <span style="color:#815ba4">new</span> <span style="color:#06b6ef">PersonCollection</span>(
	[
		{<span style="color:#06b6ef">id</span><span style="color:#5bc4bf">:</span> <span style="color:#48b685">&#34;toto&#34;</span>, <span style="color:#48b685">&#34;firstname&#34;</span><span style="color:#5bc4bf">:</span> <span style="color:#48b685">&#34;toto&#34;</span>, <span style="color:#48b685">&#34;lastname&#34;</span><span style="color:#5bc4bf">:</span> <span style="color:#48b685">&#34;fait du vélo !&#34;</span>},
		{<span style="color:#06b6ef">id</span><span style="color:#5bc4bf">:</span> <span style="color:#48b685">&#34;tutu&#34;</span>, <span style="color:#48b685">&#34;firstname&#34;</span><span style="color:#5bc4bf">:</span> <span style="color:#48b685">&#34;tutu&#34;</span>, <span style="color:#48b685">&#34;lastname&#34;</span><span style="color:#5bc4bf">:</span> <span style="color:#48b685">&#34;fait du vélo !&#34;</span>}
	]
);</code></pre></div>
<p>Remarquez que j&rsquo;ai ajouté un attribut <em>id</em> au modèle lorsque j&rsquo;ai initialisé ma collection. Cela permet à Backbone.JS de ne pas générer un code, mais de le définir, pour pouvoir ensuite utilser la méthode suivante :</p>
<div class="highlight"><pre style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#06b6ef">collection2</span>.<span style="color:#06b6ef">get</span>(<span style="color:#48b685">&#34;toto&#34;</span>); <span style="color:#ef6155">// Retourne l&#39;objet Person avec l&#39;id &#34;toto&#34;</span></code></pre></div>
<h3 id="les-vues">Les vues</h3>

<p>Les vues sont utilisées pour représenter graphiquement (HTML, <a href="http://jquery.com/">jQuery</a> / <a href="http://zeptojs.com/">Zepto</a>) les informations issues d&rsquo;un modèle ou d&rsquo;une collection. C&rsquo;est l&rsquo;IHM du modèle ou de la collection associée.</p>
<div class="highlight"><pre style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#815ba4">var</span> <span style="color:#06b6ef">PersonDetailsView</span> <span style="color:#5bc4bf">=</span> <span style="color:#06b6ef">Backbone</span>.<span style="color:#06b6ef">View</span>.<span style="color:#06b6ef">extend</span>({
	<span style="color:#776e71">// Ici on utilise un selecteur CSS3, pour indiquer le point d&#39;insertion 
</span><span style="color:#776e71"></span>	<span style="color:#776e71">// de la vue dans l&#39;arbre DOM. (On recherche un élément dont l&#39;id est &#34;details&#34;)
</span><span style="color:#776e71"></span>	<span style="color:#06b6ef">el</span><span style="color:#5bc4bf">:</span> <span style="color:#06b6ef">$</span>(<span style="color:#48b685">&#34;#details&#34;</span>),
  <span style="color:#776e71">// Ici on compile le template, cela utilise la fonction template d&#39;underscore.js
</span><span style="color:#776e71"></span>  <span style="color:#06b6ef">template</span><span style="color:#5bc4bf">:</span> <span style="color:#06b6ef">_</span>.<span style="color:#06b6ef">template</span>(<span style="color:#48b685">&#34;
</span><span style="color:#48b685">    Hello &lt;%= firstname %&gt; &lt;%= lastname %&gt; ! 
</span><span style="color:#48b685">  &#34;</span>),
	<span style="color:#06b6ef">render</span><span style="color:#5bc4bf">:</span> <span style="color:#815ba4">function</span>() {
		<span style="color:#815ba4">this</span>.<span style="color:#06b6ef">el</span>.<span style="color:#06b6ef">append</span>(<span style="color:#815ba4">this</span>.<span style="color:#06b6ef">template</span>(<span style="color:#815ba4">this</span>.<span style="color:#06b6ef">model</span>.<span style="color:#06b6ef">toJSON</span>()));
	}	
});</code></pre></div>
<p>Il est important de retenir que les vues sont du codes Javascript qui va modifier la page courante (arbre DOM). Il est de ce fait très facile de contruire des vues qui sont complètement décorréllées de la page ou elle va être &ldquo;rendue&rdquo; (affichée). J&rsquo;utilise la fonction de <a href="http://documentcloud.github.com/underscore/#template">template</a> Underscore.js.</p>

<p>Il est tout à fait possible d&rsquo;utiliser d&rsquo;autres moteurs de template, par exemple :</p>

<ul>
<li><a href="http://mustache.github.com/">Mustache.js</a></li>
<li><a href="http://twitter.github.com/hogan.js/">Hogan.js</a> (qui s&rsquo;inspire de mustache &hellip; appréciez le jeu de mot &hellip; indice: hulk)</li>
<li><a href="http://handlebarsjs.com/">Handlebar.js</a></li>
<li>et bien d&rsquo;autres &hellip;</li>
</ul>

<h3 id="les-routeurs">Les routeurs</h3>

<p>Les routeurs sont utilisés pour diriger les appels provenant de l&rsquo;extérieur, vers le bon code Javascript associé à l&rsquo;url.</p>

<p>En effet, les routeurs utilisent une partie spéciale de l&rsquo;URL, que l&rsquo;on nomme le hashbang</p>
<div class="highlight"><pre style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">http://www.zenithar.org/index.html#!/person/toto</code></pre></div>
<table class="inpost">
    <thead>
        <tr>
            <th>Extrait</th><th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>"http://"</td><td>le protocole</td>
        </tr>
        <tr>
            <td>"www"</td><td>l'hôte</td>
        </tr>
        <tr>
            <td>"index.html"</td><td>la ressource</td>
        </tr>
        <tr>
            <td>"#!/person/toto"</td><td>le hasbang</td>
        </tr>
    </tbody>
</table>

<p>Ce hasbang était historiquement utilisé pour atteindre des ancres dans la page HTML, mais il peut aussi être utilisé via Javascript pour définir des comportements, et surtout les changements sont stockés dans l&rsquo;historique de votre navigateur.</p>

<p>Par exemple, ici le hasbang peut très bien faire appel à la vue PersonneDetailsView, en utilisant l&rsquo;objet Personne ayant pour code &ldquo;toto&rdquo;.</p>
<div class="highlight"><pre style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#815ba4">var</span> <span style="color:#06b6ef">ApplicationRouter</span> <span style="color:#5bc4bf">=</span> <span style="color:#06b6ef">Backbone</span>.<span style="color:#06b6ef">Router</span>.<span style="color:#06b6ef">extend</span>({
	<span style="color:#06b6ef">routes</span> <span style="color:#5bc4bf">:</span> {
		<span style="color:#48b685">&#34;!/person/:code&#34;</span> <span style="color:#5bc4bf">:</span> <span style="color:#06b6ef">showPerson</span>,
		<span style="color:#48b685">&#34;&#34;</span><span style="color:#5bc4bf">:</span> <span style="color:#06b6ef">index</span>
	},
	<span style="color:#06b6ef">initialize</span><span style="color:#5bc4bf">:</span> <span style="color:#815ba4">function</span>() {
		<span style="color:#815ba4">this</span>.<span style="color:#06b6ef">detailsView</span> <span style="color:#5bc4bf">=</span> <span style="color:#815ba4">new</span> <span style="color:#06b6ef">PersonDetailsView</span>();
		<span style="color:#815ba4">this</span>.<span style="color:#06b6ef">collection</span> <span style="color:#5bc4bf">=</span> <span style="color:#815ba4">new</span> <span style="color:#06b6ef">PersonCollection</span>();
	},
	<span style="color:#06b6ef">showPerson</span> <span style="color:#5bc4bf">:</span> <span style="color:#815ba4">function</span>(<span style="color:#06b6ef">code</span>) {
		<span style="color:#815ba4">this</span>.<span style="color:#06b6ef">detailsView</span>.<span style="color:#06b6ef">model</span> <span style="color:#5bc4bf">=</span> <span style="color:#815ba4">this</span>.<span style="color:#06b6ef">collection</span>.<span style="color:#06b6ef">get</span>(<span style="color:#06b6ef">code</span>);
		<span style="color:#815ba4">this</span>.<span style="color:#06b6ef">detailsView</span>.<span style="color:#06b6ef">render</span>();
	},
	<span style="color:#06b6ef">index</span> <span style="color:#5bc4bf">:</span> <span style="color:#815ba4">function</span>() {
		<span style="color:#06b6ef">$</span>(<span style="color:#48b685">&#34;#details&#34;</span>).<span style="color:#06b6ef">hide</span>();
	}
});
<span style="color:#776e71">// Initialisation
</span><span style="color:#776e71"></span><span style="color:#815ba4">var</span> <span style="color:#06b6ef">router</span> <span style="color:#5bc4bf">=</span> <span style="color:#815ba4">new</span> <span style="color:#06b6ef">ApplicationRouter</span>();
<span style="color:#776e71">// Mise en place de l&#39;écoute de changement de hashbang, et dispatch des routes.
</span><span style="color:#776e71"></span><span style="color:#06b6ef">Backbone</span>.<span style="color:#06b6ef">history</span>.<span style="color:#06b6ef">start</span>();</code></pre></div>
<h3 id="et-les-contrôleurs">Et les contrôleurs ?</h3>

<p>Si vous avez compris, c&rsquo;est un modèle de conception MVC. Cependant le &lsquo;C&rsquo; de MVC, n&rsquo;est pas clairement représenté dans Backbone.JS, en effet il y a les &lsquo;V&rsquo;ues, les &rsquo;M&rsquo;odêles, mais pas (plus) de Contrôleurs.</p>

<p>Pour être propre, il fortement conseiller d&rsquo;utiliser un objet Javascript contenant les interactions entre Modêles / Collections / Vues, et de faire en sorte que les Routers utilisent le contrôleur.</p>
<div class="highlight"><pre style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#776e71">// On crée ici un singleton Javascript.
</span><span style="color:#776e71"></span><span style="color:#815ba4">var</span> <span style="color:#06b6ef">PersonController</span> <span style="color:#5bc4bf">=</span> (<span style="color:#815ba4">function</span>() {
	<span style="color:#776e71">// Sera initialisé à la création du singleton
</span><span style="color:#776e71"></span>	<span style="color:#776e71">// Fait office de code privé
</span><span style="color:#776e71"></span>	<span style="color:#815ba4">var</span> <span style="color:#06b6ef">collection</span> <span style="color:#5bc4bf">=</span> <span style="color:#815ba4">new</span> <span style="color:#06b6ef">PersonCollection</span>();
	<span style="color:#815ba4">var</span> <span style="color:#06b6ef">view</span> <span style="color:#5bc4bf">=</span> <span style="color:#815ba4">new</span> <span style="color:#06b6ef">PersonDetailsView</span>();
	<span style="color:#815ba4">return</span> {
		<span style="color:#776e71">// Code public exposé par le contrôleur
</span><span style="color:#776e71"></span>		<span style="color:#815ba4">this</span>.<span style="color:#06b6ef">showPerson</span><span style="color:#5bc4bf">:</span> <span style="color:#815ba4">function</span>(<span style="color:#06b6ef">code</span>) {
			<span style="color:#815ba4">var</span> <span style="color:#06b6ef">m</span> <span style="color:#5bc4bf">=</span> <span style="color:#06b6ef">collection</span>.<span style="color:#06b6ef">get</span>(<span style="color:#06b6ef">code</span>);
			<span style="color:#06b6ef">view</span>.<span style="color:#06b6ef">model</span> <span style="color:#5bc4bf">=</span> <span style="color:#06b6ef">m</span>;
			<span style="color:#06b6ef">view</span>.<span style="color:#06b6ef">render</span>();
		}
	}
})();
<span style="color:#776e71">// De ce fait le code du router devient
</span><span style="color:#776e71"></span>...
	<span style="color:#06b6ef">showPerson</span> <span style="color:#5bc4bf">:</span> <span style="color:#815ba4">function</span>(<span style="color:#06b6ef">code</span>) {
		<span style="color:#06b6ef">PersonController</span>.<span style="color:#06b6ef">showPerson</span>(<span style="color:#06b6ef">code</span>);
	}
...</code></pre></div>
<h3 id="communication">Communication</h3>

<p>La communication de Backbone.JS avec le serveur se fait par l&rsquo;intermédiaire d&rsquo;une méthode &ldquo;Backbone.sync&rdquo;, cette méthode va définir les comportements à adopter en fonction de l&rsquo;opération élémentaire à réaliser.</p>

<p>Par défaut, Backbone.JS utilise un mode de communication via des services type REST :</p>

<table class="inpost">
    <thead>
        <tr>
            <th>URL</th><th>Verbe HTTP</th><th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>/collections</td><td><b>GET</b></td><td>Récupèration de la liste des objets</td>
        </tr>
        <tr>
            <td>/collections</td><td><b>POST</b></td><td>Création d'un objet</td>
        <tr>
            <td>/collections/id</td><td><b>PUT</b></td><td>Mise à jour de l'objet</td>
        </tr>
        <tr>
            <td>/collections/id</td><td><b>DELETE</b></td><td>Suppression de l'objet</td>
        </tr>
    </tbody>
</table>

<p>C&rsquo;est à dire qu&rsquo;il vous faudra concevoir des services coté serveur pour pouvoir stocker les modifications coté client, via les services <a href="http://fr.wikipedia.org/wiki/Representational_State_Transfer">REST</a>.</p>

<p>Par exemple :</p>
<div class="highlight"><pre style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#815ba4">var</span> <span style="color:#06b6ef">RemotePersonCollection</span> <span style="color:#5bc4bf">=</span> <span style="color:#06b6ef">Backbone</span>.<span style="color:#06b6ef">Collection</span>.<span style="color:#06b6ef">extend</span>({
	<span style="color:#776e71">// C&#39;est une collection d&#39;object de type Personne
</span><span style="color:#776e71"></span>	<span style="color:#06b6ef">model</span><span style="color:#5bc4bf">:</span> <span style="color:#06b6ef">Person</span>,
	<span style="color:#776e71">// On ajoute l&#39;information nécessaire à Bacbone.sync pour le chargement 
</span><span style="color:#776e71"></span>	<span style="color:#776e71">// de la collection, le format de retour devra être conforme au JSON du 
</span><span style="color:#776e71"></span>	<span style="color:#776e71">// modèle
</span><span style="color:#776e71"></span>	<span style="color:#06b6ef">url</span><span style="color:#5bc4bf">:</span> <span style="color:#48b685">&#34;/api/persons&#34;</span>
});
<span style="color:#776e71">// Utilisation
</span><span style="color:#776e71"></span><span style="color:#815ba4">var</span> <span style="color:#06b6ef">remoteCollection</span> <span style="color:#5bc4bf">=</span> <span style="color:#815ba4">new</span> <span style="color:#06b6ef">RemotePersonCollection</span>();
<span style="color:#06b6ef">remoteCollection</span>.<span style="color:#06b6ef">fetch</span>(); 
<span style="color:#776e71">// Execute un appel Ajax qui va retourner une liste de personne.
</span><span style="color:#776e71">// L&#39;utilisation de la collection est comme en locale.
</span><span style="color:#776e71"></span><span style="color:#815ba4">var</span> <span style="color:#06b6ef">m</span> <span style="color:#5bc4bf">=</span> <span style="color:#06b6ef">remoteCollection</span>.<span style="color:#06b6ef">get</span>(<span style="color:#48b685">&#39;toto&#39;</span>); 
<span style="color:#776e71">// Modification de l&#39;objet de la collection
</span><span style="color:#776e71"></span><span style="color:#06b6ef">m</span>.<span style="color:#06b6ef">set</span>({<span style="color:#48b685">&#34;firstname&#34;</span><span style="color:#5bc4bf">:</span><span style="color:#48b685">&#34;dudu&#34;</span>});
<span style="color:#06b6ef">m</span>.<span style="color:#06b6ef">save</span>(); <span style="color:#ef6155">// Requête PUT &#39;/api/persons/toto&#39;</span></code></pre></div>
<h2 id="en-attendant-la-suite">En attendant la suite</h2>

<p>Bon voila pour le moment, j&rsquo;espère pas vous avoir perdu. Au menu du prochain article, la programmation asynchrone, les évènements Backbone.JS, les tests unitaires, <a href="http://coffeescript.org/">CoffeeScript</a>, et enfin le désossement de l&rsquo;application phare Backbone.JS la TODO App.</p>

<p>Je vous invite à aller lire le livre qui est en train d&rsquo;être écrit par <a href="http://addyosmani.com/">Addy Osmani</a></p>

<ul>
<li><a href="http://addyosmani.com/blog/backbone-fundamentals/">Backbone Fundamentals – A Free Work-In-Progress Book For Developers Of All Levels</a>
<br /></li>
</ul>

<p>PS : Vive Markdown, et <a href="http://mouapp.com/">Mou</a> ^^</p>
</div>

    
    

    

    

</main>

        <footer>

            <p class="copyright text-muted">Geo Joy &copy; All rights reserved. Powered by <a href="https://gohugo.io">Hugo</a> and <a href="https://github.com/calintat/minimal">Minimal</a> hosted on <a href="https://github.com/Geo-Joy/geo-joy.github.io">Github</a></p>

        </footer>
        
       <script async="" src="http://geojoy.me/js/main.js"></script>

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KQ3JDPK');</script>


    </body>

</html>

