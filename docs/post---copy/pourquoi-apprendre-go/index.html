<!DOCTYPE html>
<html lang="en-us" class="wf-loading">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <meta name="HandheldFriendly" content="True" />
        <meta name="MobileOptimized" content="320" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <link rel="preload" href="http://geojoy.me/js/main.js" as="script" />
        <link rel="preload" href="http://geojoy.me/css/main.css" as="style" />

        <title>Pourquoi apprendre le Go(lang) ?</title>
        <meta name="generator" content="Hugo 0.32.4" />
        
        <link rel="preconnect" href="https://ajax.googleapis.com/" crossorigin>
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
        <meta property="og:title" content="Pourquoi apprendre le Go(lang) ?" />
<meta property="og:description" content="Retours sur mes expériences, surprises et malheurs à l&#39;utilisation du language Go." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://geojoy.me/post---copy/pourquoi-apprendre-go/" />



<meta property="article:published_time" content="2015-03-30T00:00:00&#43;00:00"/>

<meta property="article:modified_time" content="2017-03-01T11:27:29&#43;01:00"/>











    
        <meta property="og:type" content="article" />
        <meta property="og:article:published_time" content="2015-03-30T00:00:00Z" />
        <meta property="og:article:tag" content="golang" />
        <meta property="og:article:tag" content="google" />
        
        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@megeojoy" />
        <meta name="twitter:creator" content="@megeojoy" />
        <meta name="twitter:title" content="Pourquoi apprendre le Go(lang) ?" />
        <meta name="twitter:description" content="Retours sur mes expériences, surprises et malheurs à l&#39;utilisation du language Go." />
        <meta name="twitter:url" content="http://geojoy.me/post---copy/pourquoi-apprendre-go/" />
        <meta name="twitter:image" content="http://geojoy.me/images/articles/2015/gopherbg.v2.png">
    

    
        <meta name="p:domain_verify" content="58lHJFznHgioHOIv2NvLfobc8XEUUZSKm016uFFO4vE"/>
    

    
    <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "Geo Joy",
      "url": "http://geojoy.me",
      "sameAs": [
        "https://twitter.com/megeojoy",
        "https://www.linkedin.com/in/geojoy/",
        "https://github.com/Geo-Joy",
      ],
      "image": {
        "@type": "ImageObject",
        "url": "https://geojoy.me/images/avatar.jpg",
        "height": 80,
        "width": 80
      }
    }
    </script>

    <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "@id": "http://geojoy.me",
      "name": "Geo&#39;z Blog",
      "url": "http://geojoy.me",
      "logo": {
        "@type": "ImageObject",
        "url": "https://geojoy.me/images/avatar.jpg",
        "height": 80,
        "width": 80
      }
    }
    </script>

    <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "WebSite",
      "url": "http://geojoy.me",
      "name": "Geo&#39;z Blog",
      "author": {
        "@type": "Person",
        "name": "Geo Joy"
      },
      "description": ""
    }
    </script>

      
      <script type="application/ld+json">
      {
          "@context": "http://schema.org",
          "@type": "BlogPosting",
          "headline": "Pourquoi apprendre le Go(lang) ?",
          "description": "Retours sur mes expériences, surprises et malheurs à l&#39;utilisation du language Go.",
          "author": {
              "@type": "Person",
              "name": "Geo Joy"
          },
          "publisher": {
              "@type": "Organization",
              "name": "Geo&#39;z Blog",
              "logo": "https://geojoy.me/images/avatar.jpg"
          },
          "image": {
            "@type": "ImageObject",
            "url": "http://geojoy.me/images/articles/2015/gopherbg.v2.png",
            "height": 133,
            "width": 200
          },
          "datePublished": "2015-03-30",
          "dateModified": "2017-03-01",
          "wordCount": 1342
          ,
          "keywords": ["golang","google"] 
      }
    </script>
  

    <style>
    body {
        margin: 0
    }

    main,
    nav {
        display: block
    }

    a {
        background-color: transparent
    }

    h1 {
        margin: .67em 0;
        font-size: 2em
    }

    img {
        border: 0
    }

    code,
    kbd {
        font-family: monospace, monospace;
        font-size: 1em
    }

    button {
        margin: 0;
        font: inherit;
        color: inherit
    }

    button {
        overflow: visible
    }

    button {
        text-transform: none
    }

    button {
        -webkit-appearance: button
    }

    button::-moz-focus-inner {
        padding: 0;
        border: 0
    }

    * {
        -webkit-box-sizing: border-box;
        box-sizing: border-box
    }

    :after,
    :before {
        -webkit-box-sizing: border-box;
        box-sizing: border-box
    }

    html {
        font-size: 10px
    }

    body {
        font-family: "Raleway", Helvetica, Arial, sans-serif;
        font-size: 14px;
        line-height: 1.42857143;
        color: #333;
        background-color: #000
    }

    button {
        font-family: inherit;
        font-size: inherit;
        line-height: inherit
    }

    a {
        color: #337ab7;
        text-decoration: none
    }

    img {
        vertical-align: middle
    }

    h1,
    h4,
    h5 {
        font-family: inherit;
        font-weight: 500;
        line-height: 1.1;
        color: inherit
    }

    h1 {
        margin-top: 20px;
        margin-bottom: 10px
    }

    h4,
    h5 {
        margin-top: 10px;
        margin-bottom: 10px
    }

    h1 {
        font-size: 36px
    }

    h4 {
        font-size: 18px
    }

    h5 {
        font-size: 14px
    }

    p {
        margin: 0 0 10px
    }

    .text-justify {
        text-align: justify
    }

    ul {
        margin-top: 0;
        margin-bottom: 10px
    }

    blockquote {
        padding: 10px 20px;
        margin: 0 0 20px;
        font-size: 17.5px;
        border-left: 5px solid #000
    }

    blockquote p:last-child {
        margin-bottom: 0
    }

    code,
    kbd {
        font-family: Menlo, Monaco, Consolas, "Courier New", monospace
    }

    code {
        padding: 2px 4px;
        font-size: 90%;
        color: #c7254e;
        background-color: #000;
        border-radius: 4px
    }

    kbd {
        padding: 2px 4px;
        font-size: 90%;
        color: #000;
        background-color: #333;
        border-radius: 3px;
        -webkit-box-shadow: inset 0 -1px 0 rgba(0, 0, 0, .25);
        box-shadow: inset 0 -1px 0 rgba(0, 0, 0, .25)
    }

    .container {
        padding-right: 15px;
        padding-left: 15px;
        margin-right: auto;
        margin-left: auto
    }

    @media (min-width:768px) {
        .container {
            width: 750px
        }
    }

    @media (min-width:992px) {
        .container {
            width: 970px
        }
    }

    @media (min-width:1200px) {
        .container {
            width: 1170px
        }
    }

    .collapse {
        display: none
    }

    .nav {
        padding-left: 0;
        margin-bottom: 0;
        list-style: none
    }

    .nav>li {
        position: relative;
        display: block
    }

    .nav>li>a {
        position: relative;
        display: block;
        padding: 10px 15px
    }

    .navbar {
        position: relative;
        min-height: 50px;
        margin-bottom: 20px;
        border: 1px solid transparent
    }

    @media (min-width:768px) {
        .navbar {
            border-radius: 4px
        }
    }

    @media (min-width:768px) {
        .navbar-header {
            float: left
        }
    }

    .navbar-collapse {
        padding-right: 15px;
        padding-left: 15px;
        overflow-x: visible;
        -webkit-overflow-scrolling: touch;
        border-top: 1px solid transparent;
        -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, .1);
        box-shadow: inset 0 1px 0 rgba(255, 255, 255, .1)
    }

    @media (min-width:768px) {
        .navbar-collapse {
            width: auto;
            border-top: 0;
            -webkit-box-shadow: none;
            box-shadow: none
        }
        .navbar-collapse.collapse {
            display: block !important;
            height: auto !important;
            padding-bottom: 0;
            overflow: visible !important
        }
        .navbar-fixed-top .navbar-collapse {
            padding-right: 0;
            padding-left: 0
        }
    }

    .navbar-fixed-top .navbar-collapse {
        max-height: 340px
    }

    @media (max-device-width:480px) and (orientation:landscape) {
        .navbar-fixed-top .navbar-collapse {
            max-height: 200px
        }
    }

    .container>.navbar-collapse,
    .container>.navbar-header {
        margin-right: -15px;
        margin-left: -15px
    }

    @media (min-width:768px) {
        .container>.navbar-collapse,
        .container>.navbar-header {
            margin-right: 0;
            margin-left: 0
        }
    }

    .navbar-fixed-top {
        position: fixed;
        right: 0;
        left: 0;
        z-index: 1030
    }

    @media (min-width:768px) {
        .navbar-fixed-top {
            border-radius: 0
        }
    }

    .navbar-fixed-top {
        top: 0;
        border-width: 0 0 1px
    }

    .navbar-brand {
        float: left;
        height: 50px;
        padding: 15px 15px;
        font-size: 18px;
        line-height: 20px
    }

    @media (min-width:768px) {
        .navbar>.container .navbar-brand {
            margin-left: -15px
        }
    }

    .navbar-toggle {
        position: relative;
        float: right;
        padding: 9px 10px;
        margin-top: 8px;
        margin-right: 15px;
        margin-bottom: 8px;
        background-color: transparent;
        background-image: none;
        border: 1px solid transparent;
        border-radius: 4px
    }

    .navbar-toggle .icon-bar {
        display: block;
        width: 22px;
        height: 2px;
        border-radius: 1px
    }

    .navbar-toggle .icon-bar+.icon-bar {
        margin-top: 4px
    }

    @media (min-width:768px) {
        .navbar-toggle {
            display: none
        }
    }

    .navbar-nav {
        margin: 7.5px -15px
    }

    .navbar-nav>li>a {
        padding-top: 10px;
        padding-bottom: 10px;
        line-height: 20px
    }

    @media (min-width:768px) {
        .navbar-nav {
            float: left;
            margin: 0
        }
        .navbar-nav>li {
            float: left
        }
        .navbar-nav>li>a {
            padding-top: 15px;
            padding-bottom: 15px
        }
    }

    @media (min-width:768px) {
        .navbar-right {
            float: right !important;
            margin-right: -15px
        }
    }

    .navbar-default {
        background-color: #000;
        border-color: #000
    }

    .navbar-default .navbar-brand {
        color: #777
    }

    .navbar-default .navbar-nav>li>a {
        color: #777
    }

    .navbar-default .navbar-toggle {
        border-color: #ddd
    }

    .navbar-default .navbar-toggle .icon-bar {
        background-color: #888
    }

    .navbar-default .navbar-collapse {
        border-color: #e7e7e7
    }

    .container:after,
    .container:before,
    .nav:after,
    .nav:before,
    .navbar-collapse:after,
    .navbar-collapse:before,
    .navbar-header:after,
    .navbar-header:before,
    .navbar:after,
    .navbar:before {
        display: table;
        content: " "
    }

    .container:after,
    .nav:after,
    .navbar-collapse:after,
    .navbar-header:after,
    .navbar:after {
        clear: both
    }

    @-ms-viewport {
        width: device-width
    }

    .visible-xs {
        display: none !important
    }

    @media (max-width:767px) {
        .visible-xs {
            display: block !important
        }
    }

    html {
        height: 100%
    }

    body {
        height: 100%;
        padding-top: 55px;
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        text-align: center;
        -webkit-box-orient: vertical;
        -webkit-box-direction: normal;
        -ms-flex-direction: column;
        flex-direction: column;
        font-size: 16px !important
    }

    main {
        margin: auto;
        padding: 25px;
        max-width: 750px
    }

    a:link,
    a:visited {
        color: green
    }

    .item {
        padding: 10px 0
    }

    .item-tag {
        background-color: green
    }

    .navbar-icon {
        font-size: 125%;
        display: inline-block !important
    }

    .navbar.navbar-default {
        border-top: 5px solid green
    }

    img {
        max-width: 100%
    }

    .fade-in {
        opacity: 0
    }

    .wf-loading p,
    .wf-loading h1,
    .wf-loading h2,
    .wf-loading h3,
    .wf-loading h4,
    .wf-loading a {
        visibility: hidden;
    }

    .wf-active p,
    .wf-active h1,
    .wf-active h2,
    .wf-active h3,
    .wf-active h4,
    .wf-active a {
        visibility: visible;
    }

    .wf-inactive p,
    .wf-inactive h1,
    .wf-inactive h2,
    .wf-inactive h3,
    .wf-inactive h4,
    wf-inactive a {
        visibility: visible;
    }
</style>
    </head>

    <body bgcolor="#000">
      
      <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KQ3JDPK"
      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
      

        <nav class="navbar navbar-default navbar-fixed-top">

            <div class="container">

                <div class="navbar-header">

                    <a class="navbar-brand visible-xs" href="#">Pourquoi apprendre le Go(lang) ?</a>

                    <button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>

                </div>

                <div class="collapse navbar-collapse">

                    
                        <ul class="nav navbar-nav">
                            
                                <li><a href="/">Home</a></li>
                            
                                <li><a href="/post/">Posts</a></li>
                            
                                <li><a href="/project/">Projects</a></li>
                            
                        </ul>
                    

                    
                        <ul class="nav navbar-nav navbar-right">
                            
                                <li class="navbar-icon"><a href="/resume/"><i class="fa fa-user"></i></a></li>
                            
                                <li class="navbar-icon"><a href="http://www.google.com/recaptcha/mailhide/d?k=01IIc-s5LNYiS-CG_gthn4PA==&amp;c=r5Ctx8RMDz422qmYESfk1g=="><i class="fa fa-envelope"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://github.com/Geo-Joy"><i class="fa fa-github-alt"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://twitter.com/megeojoy"><i class="fa fa-twitter"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://www.linkedin.com/in/geojoy/"><i class="fa fa-linkedin"></i></a></li>
                            
                        </ul>
                    

                </div>

            </div>

        </nav>


<main class="fade-in">

    <div class="item">

    
    
    

    
      

    <h4><a itemprop="url" href="/post---copy/pourquoi-apprendre-go/">
      <span itemprop="name">Pourquoi apprendre le Go(lang) ?</span>
    </a></h4>

    March 30, 2015
    <h5>Retours sur mes expériences, surprises et malheurs à l&#39;utilisation du language Go.</h5>
     <a href="../../../../../tags/golang"><kbd class="item-tag">golang</kbd></a>  <a href="../../../../../tags/google"><kbd class="item-tag">google</kbd></a> 

</div>


    <br> <div class="text-justify">

<p>Déjà un petit moment que je roule ma bosse avec Go, j&rsquo;avoue qu&rsquo;aujourd&rsquo;hui c&rsquo;est un peu mon python d&rsquo;avant ^^</p>

<p>Je vais essayer d&rsquo;être impartial au possible ! Voici les raisons pour lesquelles ce langage fait partie de ma caisse à outils.</p>

<h1 id="introduction">Introduction</h1>

<p>Tout d&rsquo;abord Go c&rsquo;est quoi ? C&rsquo;est un language relativement jeune, comparé au dinosaure comme C, C++, Java; il n&rsquo;a que <a href="http://blog.golang.org/5years">5 ans</a>. Il a été pricipalement écrit et développé par 3 personnes travaillant aujourd&rsquo;hui chez Google :</p>

<ul>
<li>Kenneth Thompson, ancien ingénieur chez Bell; Travaux sur Unix, création du langage B, fondation du C et de tous les langages qui en découlent;</li>
<li>Rob Pike, ancien ingénieur chercheur chez Bell; Inventeur du codage UTF-8;</li>
<li>Robert Griesemer, (jeune) docteur en informatique; Travaux sur le moteur Javascript V8;</li>
</ul>

<p>Voici l&rsquo;idée principale derrière la création du Go :</p>

<blockquote>
<p>« Chez Google, nous pensons que la programmation devrait être rapide, productive et surtout, &lsquo;fun&rsquo;. C’est pourquoi nous sommes ravis de proposer ce nouveau langage de programmation expérimental. Les opérations de compilation sont presque instantanées, et le code compilé propose une vitesse de fonctionnement proche de celle du C ».</p>
</blockquote>

<p>Vous l&rsquo;aurez deviné Go est un langage Go&rdquo;ogle&rdquo;.</p>

<h1 id="le-langage">Le langage</h1>

<h2 id="hello-world">&ldquo;Hello, World&rdquo;</h2>
<div class="highlight"><pre style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#5bc4bf">package</span> <span style="color:#06b6ef">main</span>

<span style="color:#5bc4bf">import</span> <span style="color:#48b685">&#34;fmt&#34;</span>

<span style="color:#815ba4">func</span> <span style="color:#06b6ef">main</span>() {
	<span style="color:#06b6ef">fmt</span>.<span style="color:#06b6ef">Printf</span>(<span style="color:#48b685">&#34;Hello, World\n&#34;</span>)
}</code></pre></div>
<p>Cet exemple de code montre le programme minimal. On peut y voir des ressemblances avec le C et le Python.</p>

<p>Chaque programme Go est composé d&rsquo;un <code>main</code> caractérisant le point d&rsquo;entrée du programme s&rsquo;il s&rsquo;agit d&rsquo;un exécutable.
Par convention le <code>package main</code> contiendra toujours le point d&rsquo;entrée d&rsquo;un exécutable Go.</p>

<p>Le Go est un langage  <a href="http://fr.wikipedia.org/wiki/Programmation_imp%C3%A9rative">impératif</a> et <a href="http://fr.wikipedia.org/wiki/Programmation_concurrente">concurrent</a>.</p>

<h2 id="caractéristiques">Caractéristiques</h2>

<p>Go c&rsquo;est :</p>

<ul>
<li>un langage open source (licence BSD)</li>
<li>un langage utilisant le typage fort, validé à la compilation =&gt; pas de typage au runtime</li>
<li>un garbage collector</li>
<li>efficace (pour le déploiement notamment)</li>
</ul>

<h2 id="organisation-du-code">Organisation du code</h2>

<p>Le code est organisé en <code>package</code>, et les méthodes et structures exportées sont accessibles en utilisant le nom du <code>package</code> comme préfixe de qualification.</p>
<div class="highlight"><pre style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#5bc4bf">package</span> <span style="color:#06b6ef">csv</span>

<span style="color:#776e71">// Exported function check the uppercase letter
</span><span style="color:#776e71"></span><span style="color:#815ba4">func</span> <span style="color:#06b6ef">ExportCSV</span>(<span style="color:#06b6ef">data</span> []<span style="color:#fec418">string</span>) <span style="color:#fec418">error</span> {
  <span style="color:#815ba4">return</span> <span style="color:#815ba4">nil</span>
}</code></pre></div>
<p>Ainsi dans le <code>main</code>, nous utiliserons le <code>package</code> :</p>
<div class="highlight"><pre style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#5bc4bf">package</span> <span style="color:#06b6ef">main</span>

<span style="color:#5bc4bf">import</span> (
  <span style="color:#48b685">&#34;fmt&#34;</span>
  <span style="color:#776e71">// implicitly assign a &#34;utils&#34; value that expose package methods
</span><span style="color:#776e71"></span>  <span style="color:#48b685">&#34;zenithar.org/utils&#34;</span>
)

<span style="color:#815ba4">func</span> <span style="color:#06b6ef">main</span>() {
  <span style="color:#776e71">// Declare and affect at same time
</span><span style="color:#776e71"></span>  <span style="color:#06b6ef">res</span> <span style="color:#5bc4bf">:=</span> []<span style="color:#fec418">string</span>{ <span style="color:#48b685">&#34;s1&#34;</span>, <span style="color:#48b685">&#34;s2&#34;</span>, <span style="color:#48b685">&#34;s3&#34;</span> }
  <span style="color:#06b6ef">fmt</span>.<span style="color:#06b6ef">Printf</span>(<span style="color:#48b685">&#34;%s\n&#34;</span>, <span style="color:#06b6ef">utils</span>.<span style="color:#06b6ef">ExportCSV</span>(<span style="color:#06b6ef">res</span>))
}</code></pre></div>
<h2 id="organisation-d-un-projet">Organisation d&rsquo;un projet</h2>

<p>Particularité du Go, identique aux <code>virtualenv</code> Python, l&rsquo;environnement de compilation se compose de deux environnements :</p>

<ul>
<li>GOROOT : environnement contenant les compilateurs et autres machineries internes</li>
<li>GOPATH : environnement &ldquo;projet(s)&rdquo;</li>
</ul>

<p>Lorsque vous travaillez sur plusieurs projets en même temps il est possible que certaines librairies soient nécessaires, et qui plus est vous avez plusieurs versions différentes par projets (c&rsquo;est pas bien !).</p>

<p>Le GOPATH permet de définir un environnement de travail propre à votre/vos projets.</p>

<pre><code> $GOPATH
   + src
      + github.com
      + zenithar.org
   + pkg
   + bin
</code></pre>

<p>Cette arborescence contient :</p>

<ul>
<li><code>src</code> : Les sources de votre projet et des librairies utilisées</li>
<li><code>pkg</code> : Le code compilé de votre projet et des librairies avant la génération finale</li>
<li><code>bin</code> : Les éxecutables disponibles</li>
</ul>

<p>Il est d&rsquo;ailleurs souvent conseillé d&rsquo;ajouter <code>$GOPATH/bin</code> dans votre <code>$PATH</code></p>

<h2 id="gestionnaire-de-dépendances">Gestionnaire de dépendances</h2>

<p>Un bon langage se définit par de bon outil autour du langage.</p>

<p>Le gestionnaire de <code>package</code> est intégré à la commande <code>go</code>.</p>
<div class="highlight"><pre style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">&gt; go get github.com/streadway/amqp</code></pre></div>
<p>Cette commande va télécharger le <code>package</code> amqp depuis github.com. Les sources seront déposées dans le dossier <code>$GOPATH/src</code> puis compilées sous la forme d&rsquo;une librairie statique dans le répertoire <code>$GOPATH/pkg</code>.</p>

<p>Le dépendances transitives sont automatiquement téléchargées et compilées. La detection des <code>packages</code> se fait par analyse du code Go ce qui sous-entends que vous pouvez définir les librairies à utiliser seulement lorsque vous en avez besoin, une simple commande :</p>
<div class="highlight"><pre style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">&gt; go get -v</code></pre></div>
<p>Téléchargera les <code>packages</code> manquants.</p>

<blockquote>
<p>L&rsquo;option <code>-v</code> permet de voir ce qui est en train d&rsquo;être téléchargé.</p>
</blockquote>

<h2 id="compilation-multiplateforme">Compilation multiplateforme</h2>

<p>Le langage Go est basé sur un runtime qui est codé pour plus de 16 plateformes différentes :</p>

<ul>
<li>Linux : 386, amd64, arm</li>
<li>Darwin (MacOS) : 386, amd64</li>
<li>Windows : 386, amd64</li>
<li>NetBSD : 386, amd64, arm</li>
<li>FreeBSD : 386, adm64, arm</li>
</ul>

<p>Ce runtime est un ensemble de <code>packages</code> internes sous la forme de librairies statiques ajoutées à la compilation dans votre artefact. Le runtime est déja très complet, il n&rsquo;est pas rare de voire des applications tourner sans utiliser des librairies externes pour faire :</p>

<ul>
<li>La cryptographie : Génération de clés, chiffrement, déchiffrement, etc.</li>
<li>Du réseau : Communication TCP/UDP/Unix, Serveur HTTP embarqué, SSL/TLS, etc.</li>
<li>De la manipulation d&rsquo;images : Redimensionnement, Crop, Export, etc.</li>
<li>Appels &ldquo;système&rdquo; : dépendant de la plateforme cible (Lecture base de registre sous Windows)</li>
</ul>

<p>Le runtime est très complet mais cela a un prix la taille de l&rsquo;artefact final, environ 8-9 Mo en moyenne, qui peuvent être dégraissé en 2-3 Mo.</p>
<div class="highlight"><pre style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">&gt; go build -ldflags<span style="color:#5bc4bf">=</span><span style="color:#48b685">&#34;-s&#34;</span>
&gt; upx -9 -o mini<span style="color:#5bc4bf">[</span>.exe<span style="color:#5bc4bf">]</span> main<span style="color:#5bc4bf">[</span>.exe<span style="color:#5bc4bf">]</span></code></pre></div>
<p>Personnellement ce que je trouve formidable c&rsquo;est pour la distribution, ce runtime est intégré dans l&rsquo;exécutable que vous générez. Plus besoin de pré-installation (JVM, .Net Framework, Python, etc.), votre artefact est auto-suffisant.</p>

<p>Il est même possible d&rsquo;embarquer les ressources statiques (HTML, fichiers, etc.) dans l&rsquo;artefact final.
Cette opération facilite grandement le déploiement ! (Imaginez un conteneur docker from scratch &hellip; vide &hellip; juste le service !)</p>

<h1 id="cross-compilation">Cross Compilation</h1>

<p>Un autre avantage du Go c&rsquo;est la capacité à produire sous un environnement Y, un artefact pour l&rsquo;environnement Z. C&rsquo;est à dire vous développez sous Linux, vous désirez produire un artefact pour Mac, et Windows en 32bits et 64bits; en bien vous pouvez le faire le compilateur vous offre des fonctionnalités liées à la gestion du code multiplateforme.</p>

<p>Deux possibilités :</p>

<ul>
<li>Le code est entièrement en Go : dans ce cas le compilateur va traiter tout le code est généré un exécutable statique ;</li>
<li>Le code utilise des librairies externes écrites dans un autre langage : on parle alors de <code>binding</code>, ce mode fait intervenir le compilateur <code>cgo</code>.</li>
</ul>

<p>CGO est une modification de GCC qui va compiler le code GO/C, ou GO/C++</p>
<div class="highlight"><pre style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#776e71">// Interface to both live and offline pcap parsing.
</span><span style="color:#776e71"></span><span style="color:#5bc4bf">package</span> <span style="color:#06b6ef">pcap</span>

<span style="color:#776e71">/*
</span><span style="color:#776e71">#cgo linux LDFLAGS: -lpcap
</span><span style="color:#776e71">#cgo freebsd LDFLAGS: -lpcap
</span><span style="color:#776e71">#cgo darwin LDFLAGS: -lpcap
</span><span style="color:#776e71">#cgo windows CFLAGS: -I C:/WpdPack/Include
</span><span style="color:#776e71">#cgo windows,386 LDFLAGS: -L C:/WpdPack/Lib -lwpcap
</span><span style="color:#776e71">#cgo windows,amd64 LDFLAGS: -L C:/WpdPack/Lib/x64 -lwpcap
</span><span style="color:#776e71">#include &lt;stdlib.h&gt;
</span><span style="color:#776e71">#include &lt;pcap.h&gt;
</span><span style="color:#776e71">// Workaround for not knowing how to cast to const u_char**
</span><span style="color:#776e71">int hack_pcap_next_ex(pcap_t *p, struct pcap_pkthdr **pkt_header,
</span><span style="color:#776e71">                      u_char **pkt_data) {
</span><span style="color:#776e71">    return pcap_next_ex(p, pkt_header, (const u_char **)pkt_data);
</span><span style="color:#776e71">}
</span><span style="color:#776e71">*/</span>
<span style="color:#5bc4bf">import</span> <span style="color:#48b685">&#34;C&#34;</span>
<span style="color:#5bc4bf">import</span> (
	<span style="color:#48b685">&#34;errors&#34;</span>
	<span style="color:#48b685">&#34;net&#34;</span>
	<span style="color:#48b685">&#34;syscall&#34;</span>
	<span style="color:#48b685">&#34;time&#34;</span>
	<span style="color:#48b685">&#34;unsafe&#34;</span>
)

<span style="color:#815ba4">type</span> <span style="color:#06b6ef">Pcap</span> <span style="color:#815ba4">struct</span> {
	<span style="color:#06b6ef">cptr</span> <span style="color:#5bc4bf">*</span><span style="color:#06b6ef">C</span>.<span style="color:#06b6ef">pcap_t</span>
}</code></pre></div>
<p><a href="https://github.com/akrennmair/gopcap/blob/master/pcap.go">Extrait de gopcap</a></p>

<p>Ce code écrit en Go est un <code>package</code> qui fournit les fonctionnalités de la libpcap en Go, il parait évident de ne pas réécrire la librairie en Go, on peut ainsi réutiliser du code C dans le langage Go.</p>

<p>De cette manière, il est possible d&rsquo;embarquer d&rsquo;autres librairies :</p>

<ul>
<li>Langages :

<ul>
<li>Python : <a href="https://github.com/sbinet/go-python">go-python</a></li>
<li>Lua : <a href="https://github.com/aarzilli/golua">golua</a></li>
<li>JavaScript: V8 pour Go <a href="https://github.com/robertkrimen/otto">otto</a></li>
</ul></li>
<li>Images :

<ul>
<li>ImageMagick: <a href="https://github.com/gographics/imagick">imagick</a></li>
<li>OpenCV : <a href="https://github.com/lazywei/go-opencv">go-opencv</a></li>
</ul></li>
<li>3D

<ul>
<li>OpenGL : <a href="https://github.com/go-gl/gl">gl</a></li>
</ul></li>
</ul>

<p>Pour une liste plus complète, <a href="https://github.com/avelino/awesome-go">awesome-go</a>.</p>

<p>Toutes ces librairies s&rsquo;appuient sur d&rsquo;autres librairies codées en C ou C++. Il y a même des travaux en cours pour faire tourner du <a href="https://archive.fosdem.org/2014/schedule/event/hpc_devroom_go/">CUDA/OpenCL avec GO </a>.</p>

<h1 id="conclusion">Conclusion</h1>

<p>J&rsquo;utilise Go depuis plus d&rsquo;un an et demi, ce n&rsquo;est pas le langage à tout faire, cependant je l&rsquo;utilise surtout pour :</p>

<ul>
<li>WebServices REST/JSON, RPC/JSON</li>
<li>Consommateurs RabbitMQ</li>
<li>CLI : outils en ligne de commande</li>
</ul>

<p>Voici un certains nombres d&rsquo;applications codées en Go :</p>

<ul>
<li><a href="https://github.com/docker/docker">Docker</a> : gestionnaire de conteneurs LXC (qui m&rsquo;a fait connaitre le Go)</li>
<li><a href="https://github.com/spf13/hugo">Hugo</a> : générateur de site web (qui m&rsquo;a fait apprendre le Go)</li>
<li><a href="https://github.com/hashicorp/consul">Consul</a> / <a href="https://github.com/coreos/etcd">Etcd</a> : outil de service discovery et de monitoring distribué</li>
<li><a href="https://github.com/drone/drone">Drone.io</a> : intégration continue basé sur des conteneurs Docker</li>
<li><a href="https://github.com/skynetservices/skydns">SkyDNS</a> : serveur DNS</li>
<li><a href="https://github.com/gogits/gogs">Gogs</a> : &ldquo;clone&rdquo; de github</li>
<li><a href="https://github.com/influxdb/influxdb">Influxdb</a> : base de données spécialisée time-series</li>
<li><a href="https://github.com/siddontang/ledisdb">LedisDB</a>: clone de Redis</li>
<li><a href="https://github.com/youtube/vitess">Vitess</a>: Proxy MySQL pour Youtube (Google)</li>
</ul>

<p>Voilà un tour un peu rapide de Go mais le but n&rsquo;est pas de vous apprendre le langage mais plus de vous donner envie de l&rsquo;apprendre ^^</p>
</div>

    
    

    

    

</main>

        <footer>

            <p class="copyright text-muted">Geo Joy &copy; All rights reserved. Powered by <a href="https://gohugo.io">Hugo</a> and <a href="https://github.com/calintat/minimal">Minimal</a> hosted on <a href="https://github.com/Geo-Joy/geo-joy.github.io">Github</a></p>

        </footer>
        
       <script async="" src="http://geojoy.me/js/main.js"></script>

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KQ3JDPK');</script>


    </body>

</html>

