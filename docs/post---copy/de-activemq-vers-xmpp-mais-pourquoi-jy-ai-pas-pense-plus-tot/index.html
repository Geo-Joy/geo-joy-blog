<!DOCTYPE html>
<html lang="en-us" class="wf-loading">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <meta name="HandheldFriendly" content="True" />
        <meta name="MobileOptimized" content="320" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <link rel="preload" href="/https://geojoy.mejs/main.js" as="script" />
        <link rel="preload" href="/https://geojoy.mecss/main.css" as="style" />

        <title>De ActiveMQ vers XMPP : mais pourquoi j&#39;y ai pas pensé plus tôt ?</title>
        <meta name="generator" content="Hugo 0.32.4" />
        
        <link rel="preconnect" href="https://ajax.googleapis.com/" crossorigin>
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
        <meta property="og:title" content="De ActiveMQ vers XMPP : mais pourquoi j&#39;y ai pas pensé plus tôt ?" />
<meta property="og:description" content="Suite à des projets personnels et professionnels, j&rsquo;ai été confronté à une problématique de communication inter-processus (temps réel ou pas !). Ces agents devaient effectuer un traitement bien spécifique sur l&rsquo;information qui transitait sur le bus de distribution du message.
Je travaille sur un système de monitoring multiple ressources, multisites, et surtout multiple-évènements. J&rsquo;utilisais comme transport sur mon bus d&rsquo;évènement une file Apache ActiveMQ, cependant je me suis retrouvé dans le cas où je devais programmer des fonctions de monitoring inter-agents." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://geojoy.me/post---copy/de-activemq-vers-xmpp-mais-pourquoi-jy-ai-pas-pense-plus-tot/" />



<meta property="article:published_time" content="2009-02-24T00:00:00&#43;00:00"/>

<meta property="article:modified_time" content="2017-03-01T11:27:26&#43;01:00"/>











    
        <meta property="og:type" content="article" />
        <meta property="og:article:published_time" content="2009-02-24T00:00:00Z" />
        <meta property="og:article:tag" content="activemq" />
        <meta property="og:article:tag" content="apache" />
        <meta property="og:article:tag" content="ebml" />
        <meta property="og:article:tag" content="message" />
        <meta property="og:article:tag" content="queue" />
        <meta property="og:article:tag" content="xmpp" />
        
        <meta name="twitter:card" content="summary" />
        <meta name="twitter:site" content="@megeojoy" />
        <meta name="twitter:creator" content="@megeojoy" />
        <meta name="twitter:title" content="De ActiveMQ vers XMPP : mais pourquoi j&#39;y ai pas pensé plus tôt ?" />
        <meta name="twitter:description" content="" />
        <meta name="twitter:url" content="https://geojoy.me/post---copy/de-activemq-vers-xmpp-mais-pourquoi-jy-ai-pas-pense-plus-tot/" />
        
    

    
        <meta name="p:domain_verify" content="fc173d84e3a4de948ed4bda2908afd3e"/>
    

    
    <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "Geo Joy",
      "url": "http://geojoy.me",
      "sameAs": [
        "https://twitter.com/megeojoy",
        "https://www.linkedin.com/in/geojoy/",
        "https://github.com/Geo-Joy",
      ],
      "image": {
        "@type": "ImageObject",
        "url": "https://geojoy.me/images/avatar.jpg",
        "height": 80,
        "width": 80
      }
    }
    </script>

    <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "@id": "https://geojoy.me",
      "name": "Geo&#39;z Blog",
      "url": "https://geojoy.me",
      "logo": {
        "@type": "ImageObject",
        "url": "https://geojoy.me/images/avatar.jpg",
        "height": 80,
        "width": 80
      }
    }
    </script>

    <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "WebSite",
      "url": "https://geojoy.me",
      "name": "Geo&#39;z Blog",
      "author": {
        "@type": "Person",
        "name": "Geo Joy"
      },
      "description": ""
    }
    </script>

      
      <script type="application/ld+json">
      {
          "@context": "http://schema.org",
          "@type": "BlogPosting",
          "headline": "De ActiveMQ vers XMPP : mais pourquoi j&#39;y ai pas pensé plus tôt ?",
          "description": "",
          "author": {
              "@type": "Person",
              "name": "Geo Joy"
          },
          "publisher": {
              "@type": "Organization",
              "name": "Geo&#39;z Blog",
              "logo": "https://geojoy.me/images/avatar.jpg"
          },
          
          "image": {
            "@type": "ImageObject",
            "url": "https://geojoy.me/images/avatar.jpg",
            "height": 80,
            "width": 80
          },
          "datePublished": "2009-02-24",
          "dateModified": "2017-03-01",
          "wordCount": 822
          ,
          "keywords": ["activemq","apache","ebml","message","queue","xmpp"] 
      }
    </script>
  

    <style>
body{margin:0}main,nav{display:block}a{background-color:transparent}h1{margin:.67em 0;font-size:2em}img{border:0}code,kbd{font-family:monospace,monospace;font-size:1em}button{margin:0;font:inherit;color:inherit}button{overflow:visible}button{text-transform:none}button{-webkit-appearance:button}button::-moz-focus-inner{padding:0;border:0}*{-webkit-box-sizing:border-box;box-sizing:border-box}:after,:before{-webkit-box-sizing:border-box;box-sizing:border-box}html{font-size:10px}body{font-family:"Raleway",Helvetica,Arial,sans-serif;font-size:14px;line-height:1.42857143;color:#333;background-color:#fff}button{font-family:inherit;font-size:inherit;line-height:inherit}a{color:#337ab7;text-decoration:none}img{vertical-align:middle}h1,h4,h5{font-family:inherit;font-weight:500;line-height:1.1;color:inherit}h1{margin-top:20px;margin-bottom:10px}h4,h5{margin-top:10px;margin-bottom:10px}h1{font-size:36px}h4{font-size:18px}h5{font-size:14px}p{margin:0 0 10px}.text-justify{text-align:justify}ul{margin-top:0;margin-bottom:10px}blockquote{padding:10px 20px;margin:0 0 20px;font-size:17.5px;border-left:5px solid #eee}blockquote p:last-child{margin-bottom:0}code,kbd{font-family:Menlo,Monaco,Consolas,"Courier New",monospace}code{padding:2px 4px;font-size:90%;color:#c7254e;background-color:#f9f2f4;border-radius:4px}kbd{padding:2px 4px;font-size:90%;color:#fff;background-color:#333;border-radius:3px;-webkit-box-shadow:inset 0 -1px 0 rgba(0,0,0,.25);box-shadow:inset 0 -1px 0 rgba(0,0,0,.25)}.container{padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width:768px){.container{width:750px}}@media (min-width:992px){.container{width:970px}}@media (min-width:1200px){.container{width:1170px}}.collapse{display:none}.nav{padding-left:0;margin-bottom:0;list-style:none}.nav>li{position:relative;display:block}.nav>li>a{position:relative;display:block;padding:10px 15px}.navbar{position:relative;min-height:50px;margin-bottom:20px;border:1px solid transparent}@media (min-width:768px){.navbar{border-radius:4px}}@media (min-width:768px){.navbar-header{float:left}}.navbar-collapse{padding-right:15px;padding-left:15px;overflow-x:visible;-webkit-overflow-scrolling:touch;border-top:1px solid transparent;-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,.1);box-shadow:inset 0 1px 0 rgba(255,255,255,.1)}@media (min-width:768px){.navbar-collapse{width:auto;border-top:0;-webkit-box-shadow:none;box-shadow:none}.navbar-collapse.collapse{display:block !important;height:auto !important;padding-bottom:0;overflow:visible !important}.navbar-fixed-top .navbar-collapse{padding-right:0;padding-left:0}}.navbar-fixed-top .navbar-collapse{max-height:340px}@media (max-device-width:480px) and (orientation:landscape){.navbar-fixed-top .navbar-collapse{max-height:200px}}.container>.navbar-collapse,.container>.navbar-header{margin-right:-15px;margin-left:-15px}@media (min-width:768px){.container>.navbar-collapse,.container>.navbar-header{margin-right:0;margin-left:0}}.navbar-fixed-top{position:fixed;right:0;left:0;z-index:1030}@media (min-width:768px){.navbar-fixed-top{border-radius:0}}.navbar-fixed-top{top:0;border-width:0 0 1px}.navbar-brand{float:left;height:50px;padding:15px 15px;font-size:18px;line-height:20px}@media (min-width:768px){.navbar>.container .navbar-brand{margin-left:-15px}}.navbar-toggle{position:relative;float:right;padding:9px 10px;margin-top:8px;margin-right:15px;margin-bottom:8px;background-color:transparent;background-image:none;border:1px solid transparent;border-radius:4px}.navbar-toggle .icon-bar{display:block;width:22px;height:2px;border-radius:1px}.navbar-toggle .icon-bar+.icon-bar{margin-top:4px}@media (min-width:768px){.navbar-toggle{display:none}}.navbar-nav{margin:7.5px -15px}.navbar-nav>li>a{padding-top:10px;padding-bottom:10px;line-height:20px}@media (min-width:768px){.navbar-nav{float:left;margin:0}.navbar-nav>li{float:left}.navbar-nav>li>a{padding-top:15px;padding-bottom:15px}}@media (min-width:768px){.navbar-right{float:right !important;margin-right:-15px}}.navbar-default{background-color:#f8f8f8;border-color:#e7e7e7}.navbar-default .navbar-brand{color:#777}.navbar-default .navbar-nav>li>a{color:#777}.navbar-default .navbar-toggle{border-color:#ddd}.navbar-default .navbar-toggle .icon-bar{background-color:#888}.navbar-default .navbar-collapse{border-color:#e7e7e7}.container:after,.container:before,.nav:after,.nav:before,.navbar-collapse:after,.navbar-collapse:before,.navbar-header:after,.navbar-header:before,.navbar:after,.navbar:before{display:table;content:" "}.container:after,.nav:after,.navbar-collapse:after,.navbar-header:after,.navbar:after{clear:both}@-ms-viewport{width:device-width}.visible-xs{display:none !important}@media (max-width:767px){.visible-xs{display:block !important}}html{height:100%}body{height:100%;padding-top:55px;display:-webkit-box;display:-ms-flexbox;display:flex;text-align:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;font-size:16px !important}main{margin:auto;padding:25px;max-width:750px}a:link,a:visited{color:green}.item{padding:10px 0}.item-tag{background-color:green}.navbar-icon{font-size:125%;display:inline-block !important}.navbar.navbar-default{border-top:5px solid green}img{max-width:100%}.fade-in{opacity:0}
.wf-loading p, .wf-loading h1, .wf-loading h2, .wf-loading h3, .wf-loading h4, .wf-loading a {visibility: hidden;}.wf-active  p, .wf-active h1, .wf-active h2, .wf-active h3, .wf-active h4, .wf-active a {visibility: visible;}.wf-inactive    p, .wf-inactive h1, .wf-inactive h2, .wf-inactive h3, .wf-inactive h4, wf-inactive a {visibility: visible;}
</style>

    </head>

    <body>
      
      <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KQ3JDPK"
      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
      

        <nav class="navbar navbar-default navbar-fixed-top">

            <div class="container">

                <div class="navbar-header">

                    <a class="navbar-brand visible-xs" href="#">De ActiveMQ vers XMPP : mais pourquoi j&#39;y ai pas pensé plus tôt ?</a>

                    <button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>

                </div>

                <div class="collapse navbar-collapse">

                    
                        <ul class="nav navbar-nav">
                            
                                <li><a href="/">Home</a></li>
                            
                                <li><a href="/post/">Posts</a></li>
                            
                                <li><a href="/project/">Projects</a></li>
                            
                        </ul>
                    

                    
                        <ul class="nav navbar-nav navbar-right">
                            
                                <li class="navbar-icon"><a href="/resume/"><i class="fa fa-user"></i></a></li>
                            
                                <li class="navbar-icon"><a href="http://www.google.com/recaptcha/mailhide/d?k=01IIc-s5LNYiS-CG_gthn4PA==&amp;c=r5Ctx8RMDz422qmYESfk1g=="><i class="fa fa-envelope"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://github.com/Geo-Joy"><i class="fa fa-github-alt"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://twitter.com/megeojoy"><i class="fa fa-twitter"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://www.linkedin.com/in/geojoy/"><i class="fa fa-linkedin"></i></a></li>
                            
                        </ul>
                    

                </div>

            </div>

        </nav>


<main class="fade-in">

    <div class="item">

    
    
    

    
    

    <h4><a itemprop="url" href="/post---copy/de-activemq-vers-xmpp-mais-pourquoi-jy-ai-pas-pense-plus-tot/">
      <span itemprop="name">De ActiveMQ vers XMPP : mais pourquoi j&#39;y ai pas pensé plus tôt ?</span>
    </a></h4>

    February 24, 2009
    <h5>February 24, 2009</h5>
     <a href="../../../../../tags/activemq"><kbd class="item-tag">activemq</kbd></a>  <a href="../../../../../tags/apache"><kbd class="item-tag">apache</kbd></a>  <a href="../../../../../tags/ebml"><kbd class="item-tag">ebml</kbd></a>  <a href="../../../../../tags/message"><kbd class="item-tag">message</kbd></a>  <a href="../../../../../tags/queue"><kbd class="item-tag">queue</kbd></a>  <a href="../../../../../tags/xmpp"><kbd class="item-tag">xmpp</kbd></a> 

</div>


    <br> <div class="text-justify">

<p><img src="http://static.zenithar.org/wp-content/uploads/2009/02/xmpp.png" alt="xmpp" /></p>

<p>Suite à des projets personnels et professionnels, j&rsquo;ai été confronté à une problématique de communication inter-processus (temps réel ou pas !). Ces agents devaient effectuer un traitement bien spécifique sur l&rsquo;information qui transitait sur le bus de distribution du message.</p>

<p>Je travaille sur un système de monitoring multiple ressources, multisites, et surtout multiple-évènements. J&rsquo;utilisais comme transport sur mon bus d&rsquo;évènement une file Apache ActiveMQ, cependant je me suis retrouvé dans le cas où je devais programmer des fonctions de monitoring inter-agents.</p>

<p>Chaque agent expose sa présence à la connexion au bus. C&rsquo;est le manager qui surveille le système à l&rsquo;aide de messages envoyés via un bus de contrôle.</p>

<p>Pour en revenir à nos moutons, pourquoi parler de XMPP ? Tout simplement parce que c&rsquo;est un protocole tellement simple : seulement 3 types de messages (synchrone, asynchrone, présence). Que ce protocole possède des spécifications ouvertes : il est à l&rsquo;origine du protocole Jabber.
Après analyse, je me suis aperçu que j&rsquo;avais codé exactement le comportement de XMPP (les trois types de message), alors je me suis dis pourquoi pas tout migrer sur du XMPP ? [Et c&rsquo;est à ce moment que quelqu&rsquo;un me dit toujours que je suis un grand malade !] Ce que j&rsquo;ai fait. Aujourd&rsquo;hui la technologie apporte les solutions à des problèmes bien précis, et j&rsquo;avoue je me régale toujours à détourner les fonctionnalités de ces technologies pour résoudre mes problèmes.</p>

<h2 id="problématiques">Problématiques :</h2>

<ul>
<li>Comment distribuer les messages à un agent en particulier ?</li>
<li>Comment distribuer les messages à un groupe d&rsquo;agent ?<br /></li>
<li>Comment connaître l&rsquo;état d&rsquo;un agent ?</li>
<li>Comment savoir si un agent est connecté au système ?</li>
</ul>

<p>Voici les problématiques que j&rsquo;ai résolu via l&rsquo;utilisation du protocole XMPP comme bus de communication.</p>

<p><em>1. Comment distribuer les messages à un agent en particulier ?</em>
Les messages émis sur le bus sont nominatifs, c-à-d qu&rsquo;ils ont une source et une destination.</p>

<p><em>2. Comment distribuer les messages à un groupe d&rsquo;agent ?</em>
Les messages peuvent être transmis à des groupes de contacts (buddy), ou il est possible de simuler un &ldquo;broadcast&rdquo; de message via l&rsquo;utilisation d&rsquo;un salon privé de conférence, espèce de canal IRC mais pour Jabber.</p>

<p><em>3. Comment connaître l&rsquo;état d&rsquo;un agent ?</em>
L&rsquo;état de l&rsquo;agent (disponible, occupé, etc&hellip;) correspond à l&rsquo;information de statut associée à la présence du contact sur le réseau.</p>

<p><em>4. Comment savoir si un agent est connecté au système ?</em>
Le protocole XMPP gère les présences des agents sur le réseau. A la connexion d&rsquo;un agent, celui ci informe tous les autres de sa présence.</p>

<h2 id="quels-sont-les-avantages">Quels sont les avantages ?</h2>

<ul>
<li>Le système est bcp plus réactif, les messages sont visibles dans un protocole exploitable par tous les agents capables de comprendre le XMPP. Il sera possible de créer des agents dans différents langages.<br /></li>
<li>Le système permet des communications multi-sites, en effet XMPP permet le routage des messages inter-serveurs (voir fonctionnement Jabber entre 2 domaines différents).</li>
<li>Il n&rsquo;est pas nécessaire d&rsquo;avoir un serveur de file d&rsquo;attente sur la machine.</li>
<li>Protocole ouvert et extensible, tout peut être transporté dans le flux XML.</li>
</ul>

<h2 id="quels-sont-les-inconvénients">Quels sont les inconvénients ?</h2>

<ul>
<li>Il est nécessaire d&rsquo;installer un serveur Jabber (Openfire ou eJabberd). Personnellement j&rsquo;utilise eJabberd, qui possède des fonctionnalités de clustering plutôt impressionnante. D&rsquo;ailleurs faudrait que je jette un oeil sur ce langage Erlang.<br /></li>
<li>Nécessite la connaissance du protocole XMPP un minimum, alors qu&rsquo;avec les MQ (MessageQueue) traditionnelle c&rsquo;est transparent.</li>
<li>Interaction avec un client Jabber traditionnel : peut être aussi un avantage, mais moi je vois une possibilité de détournement, (boh c&rsquo;est le consultant sécu qui parle là !)</li>
<li>Il est possible que par l&rsquo;utilisation du XML comme descripteur du protocole on obtienne une surcharge d&rsquo;informations inutiles dans les messages.</li>
</ul>

<h2 id="quelques-idées-sur-le-papier-numérique">Quelques idées sur le papier numérique :</h2>

<p>Il serait agréable d&rsquo;avoir un standard de communication permettant d&rsquo;agréger de manière simple et unique tout les protocoles réseaux. Jabber contient le concept de passerelle permettant de &ldquo;traduire&rdquo; du MSN en XMPP.</p>

<p>Pourquoi ne pas faire une passerelle SNMP / XMPP, CMMI / XMPP pour les protocoles d&rsquo;interrogations des devices. Il existe déja du XMLRPC over XMPP et du SOAP over XMPP, ce qui montre bien que XMPP est un protocole de transport tout comme le HTTP.</p>

<p>Je serais d&rsquo;avis de travailler dans le sens de réduire la taille d&rsquo;un paquet XMPP, en le passant en octet comme avec l&rsquo;EBML utilisé pour le conteneur numérique Matrovska (MKV). Cependant cherche-t-on a avoir un protocole rapide ou plutôt facile d&rsquo;utilisation et surtout facile à implémenter (Un parseur XML suffit et en avant Guingamp !). Il me semble avoir entendu parlé du XMPP en utilisant du YAML, qui est un langage qui se base sur les tabulations plutôt que le couple de balise ouverture/fermeture. Il n&rsquo;y a pas de fermeture de balise, il suffit de revenir d&rsquo;un cran pour fermer le contexte en cours.</p>

<p>Voila je termine ce long post qui je pense doit être le plus long que mon blog n&rsquo;ai jamais eut ! A vous les commentaires !</p>
</div>

    
    

    

    

</main>

        <footer>

            <p class="copyright text-muted">Geo Joy &copy; All rights reserved. Powered by <a href="https://gohugo.io">Hugo</a> and <a href="https://github.com/calintat/minimal">Minimal</a> hosted on <a href="https://github.com/Geo-Joy/geo-joy.github.io">Github</a></p>

        </footer>
        
       <script async="" src="https://geojoy.mejs/main.js"></script>

<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KQ3JDPK');</script>


    </body>

</html>

